<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSTerm</title>
    <style>
        * {font-family:monospace;}
        body,html {background:#000;color:#fff;margin:0;font-size:16px;}
        .input {
            background:#111;padding:4px;padding-left:8px;padding-right:8px;margin:0;position:fixed;width:100%;bottom:0px;
        }
        .input::before {content:"$ ";color:#666;}
        .js-out {margin:8px;}
        .js-out pre::before {content:"> ";color:#666;}
        .js-out pre.out::before {content:"  "}
    </style>
</head>
<body style="background:#000;">
    <pre class="js-out">
Welcome to <b>JSTerm</b>!
- Shift+Enter for a new line
- Enter to eval (variables are not kept)
</pre>
    <code contenteditable="true" class="input">
    </code>
    <script>
        
    console.log = function(...message) {
        let jsOut = document.querySelector(".js-out")
        let out = message.join(" ")
        let outEle = document.createElement("pre")
        outEle.classList.add("out")
        outEle.innerText = out
        outEle.style.color = "#999";
        jsOut.appendChild(outEle)
    };
    console.warn = function(...message) {
        let jsOut = document.querySelector(".js-out")
        let out = message.join(" ")
        let outEle = document.createElement("pre")
        outEle.classList.add("out")
        outEle.innerText = out
        outEle.style.color = "#00FF00";
        outEle.style.fontWeight = "600"
        jsOut.appendChild(outEle)
        
    };
    console.error = function(...message) {
        let jsOut = document.querySelector(".js-out")
        let out = message.join(" ")
        let outEle = document.createElement("pre")
        outEle.classList.add("out")
        let b = console.trace()
        outEle.innerText = out
        outEle.style.color = "#F08080";
        outEle.style.fontWeight = "600"
        jsOut.appendChild(outEle)
        
    };


        document.addEventListener('keydown', function(event) {
    if (event.key === 'Enter' && !event.shiftKey ) {
        (()=>{
            let jsOut = document.querySelector(".js-out")
        let inpForm = document.querySelector(".input")
        if (inpForm.innerText.replaceAll(" ","").replaceAll("\n","") != "") {
    
        let inpEle = document.createElement("pre")
        
        inpEle.innerText = inpForm.innerText
        inpForm.innerText= "" 
        jsOut.appendChild(inpEle)

        window.scrollTo(0, document.body.scrollHeight);
        try {
        let out = eval(inpEle.innerText);
        let outEle = document.createElement("pre")
        outEle.classList.add("out")
        outEle.innerText = out
        outEle.style.color = "#999";
        jsOut.appendChild(outEle)
        } catch (c) {
        console.error(c)
        let out = c
        let outEle = document.createElement("pre")
        outEle.classList.add("out")
        outEle.innerText = out
        outEle.style.color = "#F08080";
        outEle.style.fontWeight = "600"
        jsOut.appendChild(outEle)
        }
        } else {
            inpForm.innerText = inpForm.innerText.replaceAll(" ","").replaceAll("\n","")
        }
        })();
        

    }
});
    </script>
</body>
</html>